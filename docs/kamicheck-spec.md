# KamiCheck — 噛み込み検査AI専用機 MVP仕様書
**作成日:** 2026-02-26
**ディベート:** 3AI評議会（🦞4.5/5 + 💎4/5 + 🤖4/5）全員GO
**ステータス:** Phase 0（仕様策定）

---

## 1. 製品概要

### 1.1 コンセプト
食品ピロー包装ラインの**噛み込み検査に特化**したAI外観検査専用機。
カメラ・照明・エッジPC・排除連携をワンパッケージで提供するターンキーシステム。

### 1.2 製品名
**KamiCheck**（カミチェック）
— 噛み込み（Kami-komi）+ Check。シンプルで現場のおっちゃんでも覚えられる。

### 1.3 ミッション
「置くだけで噛み込みを見つける。AIの知識ゼロで使える。」

### 1.4 競合ポジショニング

| 項目 | Phoenix（VRAIN） | KamiCheck（キカイラボ） |
|------|------------------|----------------------|
| 対象 | 汎用外観検査 | 噛み込み検査専用 |
| 形態 | ソフトウェア販売 | ターンキー（ハード+ソフト一体） |
| 価格 | 800万〜 | 300〜500万 |
| 導入 | カメラ/照明は顧客orSI手配 | 全部込み。置くだけ |
| 学習 | ユーザーがアノテーション | 良品学習ベース。NG画像不要で立ち上がる |
| 性能保証 | ソフト性能のみ | 撮像環境込みで検出率保証 |
| PLC連携 | あり | あり |
| 対応力 | 広く浅い | 噛み込みに深い |

---

## 2. ターゲット市場

### 2.1 初期ターゲット（Phase 1）
**食品メーカーのピロー包装ライン**
- レトルトパウチ、スナック菓子、冷凍食品、乾麺等
- シール部に内容物・フィルムが噛み込むリスクがある包装形態
- 中堅〜中小食品メーカー（Phoenix 800万が高すぎる層）

### 2.2 拡張ターゲット（Phase 2以降）
1. **三方シール・四方シール包装** — 医薬品、化粧品サンプル
2. **トレーシール** — 弁当、惣菜
3. **スタンドパウチ** — 飲料、調味料

### 2.3 市場規模推定
- 国内食品工場の包装ライン数：推定数万ライン
- 噛み込み検査ニーズがあるライン：推定数千
- 初期SAM（Serviceable Addressable Market）：数千ライン × 300〜500万 = 数十〜数百億規模
- 初年度目標：3〜5台（1,500万〜2,500万売上）

---

## 3. システムアーキテクチャ

### 3.1 全体構成

```
[包装ライン]
    ↓ 製品搬送
[撮像ユニット] ← 標準照明治具（透過光+反射光）
    ↓ GigE Vision
[エッジPC] ← AI推論（良品学習+検出）
    ↓ 判定結果
[PLC連携] → 排除信号 → エアジェット/プッシャー
    ↓
[タッチパネルUI] ← 検査結果表示・設定・ログ
```

### 3.2 ハードウェア構成（標準モジュール）

**⚠️ 最重要設計原則：標準モジュール化（ChatGPT指摘）**
カスタム過多は赤字の元。以下の標準構成で80%のピロー包装ラインに対応する。

| モジュール | 仕様 | 想定コスト |
|-----------|------|----------|
| エッジPC | NVIDIA Jetson Orin NX 16GB or 産業用ミニPC（GPU内蔵） | 15〜30万 |
| カメラ | GigE Vision エリアカメラ（200万〜500万画素、カラー） | 15〜30万 |
| レンズ | Cマウント、検査幅に応じた焦点距離2〜3種から選定 | 3〜8万 |
| 照明A（透過光） | バー型LED照明（シール部透過用） | 5〜15万 |
| 照明B（反射光） | リング型 or ドーム型LED（表面状態確認用） | 5〜10万 |
| 照明コントローラ | ストロボ制御対応 | 3〜8万 |
| 取付ブラケット | アルミフレーム治具（搬送ライン上設置）、DJ設計 | 5〜15万 |
| タッチパネル | 15.6インチ産業用モニタ（IP65） | 8〜15万 |
| I/Oモジュール | デジタルI/O（PLC連携用）、トリガー入力 | 3〜8万 |
| ケーブル・電源 | 一式 | 3〜5万 |
| **ハード合計** | | **65〜144万** |

### 3.3 搬送条件の標準対応範囲

| パラメータ | 標準対応範囲 |
|-----------|------------|
| 搬送速度 | 〜60m/min（=1m/s、一般的な横ピロー包装機） |
| 包装幅 | 50〜300mm |
| シール幅 | 5〜30mm |
| 搬送方式 | ベルトコンベア（フラット/ガイド付き） |
| 環境温度 | 5〜40℃ |
| 防塵防水 | IP54以上（食品工場環境） |

→ この範囲外はカスタム対応（別途見積り）。範囲内は標準機で対応。

---

## 4. ソフトウェア仕様

### 4.1 AI検査エンジン

**アプローチ：良品学習ベース + 物体検出のハイブリッド**

| レイヤー | 手法 | 用途 |
|---------|------|------|
| Layer 1: 良品学習 | PatchCore / PaDiM（Anomalib） | シール部の異常検知。NG画像不要で立ち上がる |
| Layer 2: 物体検出 | YOLOv8 / RT-DETR | 噛み込み位置の特定。NG画像が溜まったら精度向上 |
| Layer 3: ルールベース | OpenCV（閾値処理） | シール幅の寸法チェック、明らかな異常の高速検出 |

**推論パイプライン：**
1. カメラトリガー → 画像取得
2. ROI切り出し（シール部のみ抽出）
3. Layer 3（ルールベース）→ 明らか異常は即NG
4. Layer 1（良品学習）→ 異常スコア算出
5. スコアが閾値超え → Layer 2（位置特定）
6. 総合判定 → OK/NG + 信頼度 + 異常位置ヒートマップ
7. PLC出力 → 排除信号

**目標性能：**
| 指標 | 目標値 |
|------|--------|
| 検出率（Recall） | ≥ 99.5% |
| 過検出率（False Positive） | ≤ 1.0% |
| 処理速度 | ≤ 50ms/枚（20fps以上） |
| 立ち上げ時間 | 良品画像100枚で初期モデル構築（1時間以内） |

### 4.2 推論ランタイム

| コンポーネント | 技術 |
|-------------|------|
| フレームワーク | PyTorch（開発・学習用） |
| 推論最適化 | ONNX Runtime / TensorRT（Jetson対応） |
| カメラ制御 | Aravis（GigE Vision OSS）or メーカーSDK |
| 画像処理 | OpenCV |
| ランタイム | Python 3.11+（推論サーバー） |

### 4.3 タッチパネルUI

**設計思想：** AIの知識ゼロの現場作業者が使える。
**技術：** Webアプリ（React + FastAPI）→ エッジPC内蔵ブラウザ表示

| 画面 | 機能 |
|------|------|
| メイン画面 | リアルタイム検査映像 + OK/NGカウント + 直近NG画像サムネイル |
| 設定画面 | ROI設定（ドラッグ操作）、感度調整（スライダー1本）、PLC接点設定 |
| 学習画面 | 「良品登録」ボタン1つ。画像を選んで登録するだけ |
| ログ画面 | 日別・時間別の検査結果グラフ、NG画像一覧（フィルタ付き） |
| 管理画面 | システム状態、ディスク残量、ネットワーク設定、アップデート |

**UI原則：**
- ボタンは大きく（タッチ操作前提）
- 日本語表示（英語切替可能）
- 操作ステップは最大3タップ
- 感度調整は「厳しい ← → 緩い」のスライダー1本に抽象化

### 4.4 PLC連携

| インターフェース | 対応 |
|---------------|------|
| デジタルI/O | OK/NG信号出力（24V）、トリガー入力 |
| Modbus TCP | 標準対応 |
| CC-Link | オプション対応（食品業界で需要あり） |
| EtherNet/IP | オプション対応 |
| OPC UA | 将来対応予定 |

### 4.5 データ管理

| 機能 | 仕様 |
|------|------|
| 検査画像保存 | NG画像は全保存、OK画像はサンプリング保存（設定可能） |
| ストレージ | 内蔵SSD 1TB（約100万枚のNG画像保存可能） |
| エクスポート | CSV（検査ログ）、画像フォルダ（USB経由） |
| 遠隔保守 | VPN経由でキカイラボからリモートアクセス（オプション） |
| トレーサビリティ | 時刻+ライン番号+判定結果+画像パスのログ |

---

## 5. 開発計画

### 5.1 Phase 0：仕様策定 + 技術検証（現在 〜 2週間）
- [x] 3AI評議会ディベート
- [x] MVP仕様書作成（本文書）
- [ ] Anomalib / PaDiM のベンチマークテスト（公開データセットで）
- [ ] カメラ・照明の候補選定と見積り
- [ ] 共同開発パートナー候補の選定

### 5.2 Phase 1：技術PoC（4週間）
- [ ] テスト撮像環境の構築（社内ラボ、擬似噛み込みサンプル作成）
- [ ] 良品学習モデルの構築と精度検証
- [ ] 推論速度のベンチマーク（Jetson Orin上）
- [ ] 簡易UIプロトタイプ
- [ ] PoC結果レポート作成
- **Stop条件：** 検出率95%未満 or 処理速度100ms超 → 技術方針再検討

### 5.3 Phase 2：共同開発（8〜12週間）
- [ ] パートナー企業の実包装ラインでPoC実施
- [ ] 現場環境での精度検証（実製品、実搬送速度）
- [ ] UI/UXの現場フィードバック収集と改修
- [ ] PLC連携の実装とテスト
- [ ] 標準ハード構成の確定
- **Stop条件：** 現場精度が検出率98%未満 → 撮像条件の再設計

### 5.4 Phase 3：製品化（8週間）
- [ ] 標準ハード筐体の設計・製作
- [ ] 製品版ソフトウェアの完成
- [ ] 取扱説明書・セットアップガイド作成
- [ ] 型式認定・CE対応の検討
- [ ] 価格表・見積りテンプレート作成
- [ ] 製品Webページ作成

### 5.5 Phase 4：初号機納入 + 事例化
- [ ] パートナー企業への正式納入
- [ ] 3ヶ月間の運用サポート
- [ ] 検出率・過検出率の実績データ収集
- [ ] 成功事例の作成（写真・数値データ入り）
- [ ] 展示会出展 or Webマーケティング開始

### 5.6 全体スケジュール概算

```
Phase 0 ████ 2週間
Phase 1 ████████ 4週間
Phase 2 ████████████████ 8〜12週間
Phase 3 ████████████████ 8週間
Phase 4 ████████ 納入+3ヶ月運用
─────────────────────────────────
合計：約6〜8ヶ月で初号機納入
```

---

## 6. 価格戦略

### 6.1 標準価格

| 構成 | 価格（税別） |
|------|------------|
| KamiCheck 標準機（ハード+ソフト一式） | 350万 |
| 導入設定・調整費（初回学習含む） | 50万 |
| 年間保守（遠隔サポート+ソフト更新） | 36万/年 |
| **初年度合計** | **436万** |

### 6.2 原価構成（目標）

| 項目 | 金額 |
|------|------|
| ハードウェア原価 | 80〜120万 |
| ソフトウェア原価（按分） | 30〜50万 |
| 導入・調整工数 | 20〜40万 |
| **原価合計** | **130〜210万** |
| **粗利** | **190〜270万（粗利率48〜62%）** |

### 6.3 共同開発パートナー特別価格
- PoC費用：無償〜実費（50万以内）
- 初号機：250万（標準価格の約70%）
- 条件：事例公開の許諾、フィードバック提供

---

## 7. Go-to-Market

### 7.1 初期戦略（Gemini + ChatGPT 統合）

1. **既存顧客ネットワークから候補選定**
   - ピロー包装ラインを持つ食品メーカー
   - キカイラボとの信頼関係が既にある
   - 噛み込み不良で困っている（クレーム実績があれば尚良し）

2. **共同開発パートナーとして提案**
   - 「一緒に作りませんか」のスタンス
   - PoC無償、本機は特別価格
   - 現場の生の課題を取り込める

3. **成功事例の武器化**
   - 検出率・過検出率の数値データ
   - Before/After写真
   - 顧客の声（可能なら）

4. **横展開**
   - FOOMA JAPAN等の食品機械展示会
   - 食品業界メディアへのプレスリリース
   - Webサイト + SEO（「噛み込み検査 AI」で1位を取る）

### 7.2 営業チャネル

| チャネル | 優先度 | 備考 |
|---------|--------|------|
| 既存顧客直販 | ★★★ | 最優先。信頼関係活用 |
| 食品機械展示会（FOOMA等） | ★★☆ | Phase 3以降 |
| Web問い合わせ | ★★☆ | SEO + 事例コンテンツ |
| 包装機メーカーとのOEM/連携 | ★☆☆ | 中期戦略 |

---

## 8. リスク管理

### 8.1 識別済みリスクと対策

| リスク | 影響 | 確率 | 対策 |
|--------|------|------|------|
| 初号機の性能不足で悪評 | 致命的 | 中 | 共同開発で十分な検証期間を確保。性能未達なら納品延期 |
| カスタム過多で赤字 | 高 | 高 | 標準対応範囲を明確に定義。範囲外は別途見積り |
| NG画像データ不足 | 中 | 高 | 良品学習ベースで立ち上げ。運用中にNG画像蓄積→精度向上 |
| 過検出多発でライン停止 | 高 | 中 | 感度調整UI + 「通知のみモード」で段階的導入 |
| VRAINが噛み込み特化版を出す | 中 | 低 | 先行事例の蓄積 + ハード込みの参入障壁 |
| AI人材の確保困難 | 中 | 中 | OSS活用で属人化を抑制。JARVIS活用で開発効率化 |

### 8.2 失敗時の撤退基準
- Phase 1 PoC: 検出率95%未満 → AIアプローチ変更 or 中止検討
- Phase 2 現場: 検出率98%未満 → 撮像条件の根本見直し
- Phase 4 運用: 過検出率5%超が3ヶ月改善不可 → 返金対応の検討

---

## 9. 将来拡張ロードマップ

### 9.1 垂直展開（検査項目追加）
```
噛み込み → シール不良（未シール/弱シール）→ 印字検査 → 異物検査 → 形状検査
```

### 9.2 水平展開（業界拡張）
```
食品ピロー → 食品トレー → 医薬品PTP → 化粧品サンプル → 日用品
```

### 9.3 データサービス（SaaS化）
- 検査データの傾向分析ダッシュボード
- 充填機/シール機の異常予兆検知
- 月額保守 + データ分析サービス

---

## 10. 却下した案と理由

| 案 | 却下理由 |
|----|---------|
| Phoenix同等の汎用プラットフォーム | VRAIN（100名+上場）と正面衝突。勝ち目なし |
| ソフトウェアのみ販売 | 差別化が弱い。撮像環境の責任が曖昧になる |
| クラウドベースのAI検査 | 食品工場はネットワーク環境が貧弱。遅延も許容不可 |
| 最初から複数検査項目対応 | 「広く浅い」はPhoenixの土俵。一点突破が正しい |
| 低価格（100万以下）のエントリーモデル | 利益が出ない。品質保証も困難。中途半端が最悪 |

---

## 11. チーム体制（想定）

| 役割 | 担当 | 備考 |
|------|------|------|
| プロジェクトリーダー/機械設計 | DJ | 撮像治具・搬送・筐体設計 |
| AI/ソフトウェア開発 | 🦞+🤖+💎 | モデル開発・UI・推論エンジン |
| Claude Code実装 | Jarvis🤖 | 自律コーディング・テスト |
| 市場調査・事業計画 | 🦞 | 競合分析・価格戦略 |
| 顧客対応・PoC | DJ | 既存ネットワーク活用 |

---

## 12. 共同開発パートナー [DECIDED]

### 12.1 パートナー
**プリマハム株式会社 茨城工場**

### 12.2 なぜプリマハムが最適か
| 条件 | 状態 |
|------|------|
| Phoenix導入済み（キカイラボ経由） | ✅ 噛み込み検査が課題として残っている |
| キカイラボ製装置が多数稼働中 | ✅ 現場アクセスのハードルがゼロ |
| 担当者との関係 | ✅ 太いパイプ。信頼関係構築済み |
| テスト環境 | ✅ いつでも実ラインでテスト可能 |
| 業界 | ✅ ハム・ソーセージ = ピロー包装の代表的ユースケース |

→ Phoenixの限界を体感している顧客に、その限界を超える製品を提案する。
これ以上ない共同開発シナリオ。

### 12.3 提案シナリオ
1. 「Phoenixで噛み込み検査、うまくいってますか？」からヒアリング開始
2. Phoenixの具体的な課題（過検出？検出漏れ？設定の難しさ？）を深掘り
3. 「噛み込みに特化した専用機を共同開発しませんか」と提案
4. PoC無償（撮像テスト+AI検証）→ 結果レポートを提供
5. 結果が良ければ共同開発契約 → 初号機を特別価格で納入

### 12.4 ヒアリングで確認すべき項目
- [ ] 現在の噛み込み検査フロー（目視？Phoenix？両方？）
- [ ] Phoenixで噛み込み検査を試した結果と課題
- [ ] 対象包装形態（ピロー？三方シール？トレー？）
- [ ] 搬送速度・包装サイズ
- [ ] 現在の噛み込み不良発生率
- [ ] 噛み込みによる過去のクレーム・回収実績
- [ ] 検査に求める精度（見逃し率・過検出許容度）
- [ ] 予算感（300〜500万のレンジに入るか）
- [ ] 導入希望時期

---

## 13. Phase 1 PoC 具体計画

### 13.1 目的
プリマハム茨城工場の実包装ラインで撮像テストを行い、
AI検査の技術的実現性を実データで検証する。

### 13.2 PoC工程（4週間）

**Week 1: 現場ヒアリング + 撮像テスト**
- [ ] プリマハム担当者とヒアリング（上記§12.4の項目）
- [ ] 包装ライン現場視察（シール部の状態、搬送条件、照明環境を確認）
- [ ] テスト用カメラ+照明を持ち込み、シール部の試験撮像
- [ ] 良品画像 200枚以上 + 噛み込みNG画像（あれば）を取得
- [ ] 撮像条件の記録（照明角度・カメラ距離・搬送速度・露光時間）

**Week 2: AIモデル構築 + 初期検証**
- [ ] 取得画像の前処理（ROI切り出し、リサイズ、正規化）
- [ ] Anomalib（PatchCore）で良品学習モデル構築
- [ ] NG画像がある場合はYOLOv8で検出モデルも並行構築
- [ ] 検出率・過検出率の初期測定
- [ ] 処理速度ベンチマーク

**Week 3: 精度改善 + 追加撮像**
- [ ] Week 2の結果を踏まえ、撮像条件の最適化（照明変更等）
- [ ] 必要に応じて追加撮像
- [ ] モデルのハイパーパラメータ調整
- [ ] ルールベース前処理の追加（シール幅検出等）

**Week 4: レポート作成 + プリマハムへ報告**
- [ ] PoC結果レポート作成（検出率、過検出率、処理速度、NG画像サンプル）
- [ ] Phoenix比較分析（可能であれば同じ画像でPhoenixとKamiCheckを比較）
- [ ] 共同開発提案書の作成
- [ ] プリマハムへの報告会

### 13.3 PoC必要機材（仮）
| 機材 | 用途 | 調達方法 |
|------|------|---------|
| 産業用カメラ（GigE） | 撮像 | 購入 or デモ機借用 |
| バー型LED照明 | 透過光撮像 | 購入 |
| ドーム型LED照明 | 反射光撮像 | 購入 |
| ノートPC（GPU搭載） | 現場撮像+学習 | 既存M3 or M1使用 |
| 三脚+固定治具 | カメラ仮固定 | 製作 |
| **PoC機材予算** | | **20〜40万** |

### 13.4 PoC成功基準
| 指標 | 合格 | 不合格 |
|------|------|--------|
| 噛み込み検出率 | ≥ 95% | < 95% → 撮像条件見直し |
| 過検出率 | ≤ 3% | > 5% → モデル調整 |
| 処理速度 | ≤ 100ms/枚 | > 200ms → 推論最適化 |
| 立ち上げ時間 | 良品100枚で学習完了 | — |

### 13.5 PoC後の判断
- **合格 →** Phase 2（共同開発契約、製品化開始）
- **条件付き合格 →** 追加撮像テスト（照明・カメラ変更）
- **不合格 →** 技術方針の根本見直し or 中止

---

## 14. 次のアクション

1. **DJ →** プリマハム担当者にヒアリングのアポ取り
2. **🦞 →** Anomalib/PaDiMのベンチマークテスト（公開データセットで事前検証）
3. **🦞 →** PoC用カメラ・照明の候補リストと見積り調査
4. **DJ+🦞 →** ヒアリング質問リストの最終化
5. **DJ →** PoC用テスト撮像キットの機材手配

---

*本仕様書は3AI評議会（🦞💎🤖）の統合結論に基づく。変更時は評議会での再議論を推奨。*
